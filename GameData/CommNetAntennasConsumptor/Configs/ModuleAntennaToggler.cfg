// DeployFxModules is an index of the ModuleAntennaToggler in a part, so the patch need to be :FIRST
// --------------------------------------------------------------------------------------------------

@PART[*]:HAS[@MODULE[ModuleDataTransmitte*]:HAS[~antennaType[INTERNAL]],!MODULE[ModuleCargoPart],!MODULE[ModuleDeployableAntenna],!MODULE[DMSIGINT],!MODULE[DMSoilMoisture]]:FIRST
{
    MODULE
    {
        name = ModuleAntennaToggler
    }

    @MODULE[ModuleDataTransmitter]
    {
        DeployFxModules = 1
    }
}


@PART[*]:HAS[@MODULE[ModuleDataTransmitte*]:HAS[~antennaType[INTERNAL]],@MODULE[ModuleCargoPart],!MODULE[ModuleDeployableAntenna],!MODULE[DMSIGINT],!MODULE[DMSoilMoisture]]:FIRST
{
    MODULE
    {
        name = ModuleAntennaToggler
    }

    @MODULE[ModuleDataTransmitter]
    {
        DeployFxModules = 2
    }
}

// -----------------

@PART[*]:HAS[@MODULE[ModuleAntennaToggler],@MODULE[ModuleAntennaFeed]]:NEEDS[NearFutureExploration]:FIRST
{
    @MODULE[ModuleDataTransmitter]
    {
        @DeployFxModules += 1
    }
}

// -----------------

@PART[MpoProbe]:HAS[@MODULE[ModuleDataTransmitte*]:HAS[~antennaType[INTERNAL]],!MODULE[ModuleDeployableAntenna]]:FIRST
{
    @MODULE[ModuleDataTransmitter]
    {
        @DeployFxModules = 7
    }
}

